{"ast":null,"code":"import _objectWithoutProperties from\"/Users/loki/feature1/HBMS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _objectSpread from\"/Users/loki/feature1/HBMS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import axios from\"axios\";import{getRedirectPath}from'../utils/util';import{AUTH_SUCCESS,LOAD_DATA,ERROR_MSG,LOGOUT}from'./types';// const REGISTER_SUCCESS = 'REGISTER_SUCCESS'\n// const LOGIN_SUCCESS = 'LOGIN_SUCCESS'\nvar initState={redirectTo:'',// isAuth:false,\nmsg:'',user:'',pwd:'',type:''};export function user(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case AUTH_SUCCESS:return _objectSpread(_objectSpread(_objectSpread({},state),{},{msg:'',redirectTo:getRedirectPath(action.payload)},action.payload),{},{pwd:''});// case LOGIN_SUCCESS:\n//     return {...state,msg:'',redirectTo:getRedirectPath(action.payload),isAuth:true,...action.payload}\n// case AUTH_SUCCESS:\ncase LOAD_DATA:return _objectSpread(_objectSpread({},state),action.payload);case ERROR_MSG:return _objectSpread(_objectSpread({},state),{},{isAuth:false,msg:action.msg});case LOGOUT:return _objectSpread(_objectSpread({},initState),{},{redirectTo:'/login'});default:return state;}}function authSuccess(obj){var pwd=obj.pwd,data=_objectWithoutProperties(obj,[\"pwd\"]);return{type:AUTH_SUCCESS,payload:data};}// function registerSuccess(data){\n//     return {type:REGISTER_SUCCESS,payload:data}\n// }\n// function loginSuccess(data){\n//     console.log('user.redux.js---->loginSuccess--->data',data);\n//     return {type:LOGIN_SUCCESS,payload:data}\n// }\n//作用：将数据放到redux中\nexport function loadData(userinfo){// console.log(loadData)\nreturn{type:LOAD_DATA,payload:userinfo};}function errorMsg(msg){return{msg:msg,type:ERROR_MSG};}export function logoutSubmit(){return{type:LOGOUT};}export function register(_ref){var user=_ref.user,pwd=_ref.pwd,repeatpwd=_ref.repeatpwd,type=_ref.type;if(!user||!pwd||!type){return errorMsg('用户名密码必须输入');}if(pwd!==repeatpwd){return errorMsg('密码不一致');}return function(dispatch){axios.post('/user/register',{user:user,pwd:pwd,type:type}).then(function(res){if(res.status===200&&res.data.code===0){dispatch(authSuccess({user:user,pwd:pwd,type:type}));}else{dispatch(errorMsg(res.data.msg));}});};}export function update(data){return function(dispatch){axios.post('/user/update',data).then(function(res){if(res.status===200&&res.data.code===0){// console.log(res.data.data);\ndispatch(authSuccess(res.data.data));}else{dispatch(errorMsg(res.data.msg));}});};}export function login(_ref2){var user=_ref2.user,pwd=_ref2.pwd;if(!user||!pwd){return errorMsg('用户名密码必须输入');}return function(dispatch){axios.post('/user/login',{user:user,pwd:pwd}).then(function(res){if(res.status===200&&res.data.code===0){// console.log(res.data.data);\ndispatch(authSuccess(res.data.data));}else{dispatch(errorMsg(res.data.msg));}});};}","map":{"version":3,"sources":["/Users/loki/feature1/HBMS/src/redux/user.redux.js"],"names":["axios","getRedirectPath","AUTH_SUCCESS","LOAD_DATA","ERROR_MSG","LOGOUT","initState","redirectTo","msg","user","pwd","type","state","action","payload","isAuth","authSuccess","obj","data","loadData","userinfo","errorMsg","logoutSubmit","register","repeatpwd","dispatch","post","then","res","status","code","update","login"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {getRedirectPath} from '../utils/util'\nimport { AUTH_SUCCESS, LOAD_DATA, ERROR_MSG, LOGOUT } from './types'\n// const REGISTER_SUCCESS = 'REGISTER_SUCCESS'\n// const LOGIN_SUCCESS = 'LOGIN_SUCCESS'\n\nconst initState={\n    redirectTo:'',\n    // isAuth:false,\n    msg:'',\n    user:'',\n    pwd:'',\n    type:''\n}\n\n\nexport function user(state=initState,action){\n    switch(action.type){\n        case AUTH_SUCCESS:\n            return {...state,msg:'',redirectTo:getRedirectPath(action.payload),...action.payload,pwd:''}\n        // case LOGIN_SUCCESS:\n        //     return {...state,msg:'',redirectTo:getRedirectPath(action.payload),isAuth:true,...action.payload}\n        // case AUTH_SUCCESS:\n        case LOAD_DATA:\n            return {...state, ...action.payload}\n        case ERROR_MSG:\n            return {...state,isAuth:false,msg:action.msg}\n        case LOGOUT:\n\t\t\treturn {...initState,redirectTo:'/login'}\n        default:\n            return state\n    }\n   \n}\n\nfunction authSuccess(obj){\n    const {pwd,...data} = obj\n    return {type:AUTH_SUCCESS,payload:data}\n}\n\n// function registerSuccess(data){\n//     return {type:REGISTER_SUCCESS,payload:data}\n// }\n\n// function loginSuccess(data){\n//     console.log('user.redux.js---->loginSuccess--->data',data);\n    \n//     return {type:LOGIN_SUCCESS,payload:data}\n// }\n\n//作用：将数据放到redux中\nexport function loadData(userinfo){\n\t// console.log(loadData)\n\treturn { type:LOAD_DATA, payload:userinfo}\n}\nfunction errorMsg(msg){\n    return {msg,type:ERROR_MSG}\n}\nexport function logoutSubmit(){\n\treturn { type:LOGOUT }\n}\nexport function register({user,pwd,repeatpwd,type}){\n    if(!user||!pwd||!type){\n        return errorMsg('用户名密码必须输入')\n    }\n    if(pwd!==repeatpwd){\n        return errorMsg('密码不一致')\n    }\n    return dispatch=>{\n        axios.post('/user/register',{user,pwd,type})\n        .then(res=>{\n            if(res.status===200&&res.data.code===0){\n                dispatch(authSuccess({user,pwd,type}))\n            }else{\n                dispatch(errorMsg(res.data.msg))\n            }\n        })\n    }\n    \n}\n\nexport function update(data){\n   return dispatch=>{\n       axios.post('/user/update',data)\n       .then(res=>{\n            if(res.status===200&&res.data.code===0){\n                // console.log(res.data.data);\n                dispatch(authSuccess(res.data.data))\n            }else{\n                dispatch(errorMsg(res.data.msg))\n            }\n       })\n   }\n}\n\nexport function login({user,pwd}){\n    if(!user||!pwd){\n        return errorMsg('用户名密码必须输入')\n    }\n    return dispatch=>{\n        axios.post('/user/login',{user,pwd})\n        .then(res=>{\n            if(res.status===200&&res.data.code===0){\n                // console.log(res.data.data);\n                dispatch(authSuccess(res.data.data))\n            }else{\n                dispatch(errorMsg(res.data.msg))\n            }\n        })\n    }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}