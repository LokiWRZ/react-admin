{"ast":null,"code":"var _dec, _class;\n\nimport React from 'react';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport { loadData } from '../../redux/user.redux';\nimport { connect } from 'react-redux';\nlet AuthRoute = (_dec = connect(null, {\n  loadData\n}), withRouter(_class = _dec(_class = class AuthRoute extends React.Component {\n  componentDidMount() {\n    const publicList = ['/login', '/register'];\n    const pathname = this.props.location.pathname;\n\n    if (publicList.indexOf(pathname) > -1) {\n      return null;\n    } // 获取用户信息\n\n\n    axios.get('/user/info').then(res => {\n      if (res.status == 200) {\n        if (res.data.code == 0) {\n          // 有登录信息de\n          this.props.loadData(res.data.data);\n        } else {\n          this.props.history.push('/login');\n        }\n      }\n    }); // 是否登录\n    // 现在的url地址  login是不需要跳转的\n    // 用户的type 身份是boss还是牛人\n    // 用户是否完善信息（选择头像 个人简介）\n  }\n\n  render() {\n    return null;\n  }\n\n}) || _class) || _class);\nexport default AuthRoute;","map":{"version":3,"sources":["/Users/loki/feature1/Handy-Booking-Management-System/src/component/authroute/authroute.js"],"names":["React","axios","withRouter","loadData","connect","AuthRoute","Component","componentDidMount","publicList","pathname","props","location","indexOf","get","then","res","status","data","code","history","push","render"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,QAAT,QAAyB,wBAAzB;AACA,SAASC,OAAT,QAAwB,aAAxB;IAOMC,S,WAJLD,OAAO,CACP,IADO,EAEP;AAACD,EAAAA;AAAD,CAFO,C,EADPD,U,wBAAD,MAKMG,SALN,SAKwBL,KAAK,CAACM,SAL9B,CAKuC;AACtCC,EAAAA,iBAAiB,GAAG;AACnB,UAAMC,UAAU,GAAG,CAAC,QAAD,EAAU,WAAV,CAAnB;AACA,UAAMC,QAAQ,GAAG,KAAKC,KAAL,CAAWC,QAAX,CAAoBF,QAArC;;AACA,QAAID,UAAU,CAACI,OAAX,CAAmBH,QAAnB,IAA6B,CAAC,CAAlC,EAAqC;AACpC,aAAO,IAAP;AACA,KALkB,CAMnB;;;AACAR,IAAAA,KAAK,CAACY,GAAN,CAAU,YAAV,EACCC,IADD,CACMC,GAAG,IAAE;AACT,UAAIA,GAAG,CAACC,MAAJ,IAAY,GAAhB,EAAqB;AACpB,YAAID,GAAG,CAACE,IAAJ,CAASC,IAAT,IAAe,CAAnB,EAAsB;AACrB;AACA,eAAKR,KAAL,CAAWP,QAAX,CAAoBY,GAAG,CAACE,IAAJ,CAASA,IAA7B;AACA,SAHD,MAGK;AACJ,eAAKP,KAAL,CAAWS,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACA;AACD;AACD,KAVF,EAPmB,CAkBnB;AACA;AAEA;AACA;AACA;;AACDC,EAAAA,MAAM,GAAE;AACP,WAAO,IAAP;AACA;;AA3BqC,C;AA8BvC,eAAehB,SAAf","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { withRouter } from 'react-router-dom'\nimport { loadData } from '../../redux/user.redux'\nimport { connect } from 'react-redux'\n\n@withRouter\n@connect(\n\tnull,\n\t{loadData}\n)\nclass AuthRoute extends React.Component{\n\tcomponentDidMount() {\n\t\tconst publicList = ['/login','/register']\n\t\tconst pathname = this.props.location.pathname\n\t\tif (publicList.indexOf(pathname)>-1) {\n\t\t\treturn null\n\t\t}\n\t\t// 获取用户信息\n\t\taxios.get('/user/info').\n\t\t\tthen(res=>{\n\t\t\t\tif (res.status==200) {\n\t\t\t\t\tif (res.data.code==0) {\n\t\t\t\t\t\t// 有登录信息de\n\t\t\t\t\t\tthis.props.loadData(res.data.data)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.props.history.push('/login')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t// 是否登录\n\t\t// 现在的url地址  login是不需要跳转的\n\n\t\t// 用户的type 身份是boss还是牛人\n\t\t// 用户是否完善信息（选择头像 个人简介）\n\t}\n\trender(){\n\t\treturn null\n\t}\n\n}\nexport default AuthRoute"]},"metadata":{},"sourceType":"module"}