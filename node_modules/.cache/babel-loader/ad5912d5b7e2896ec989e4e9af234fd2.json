{"ast":null,"code":"var _class;\n\nimport { Component } from 'react';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom'; // 由于checkLogin 不是路由，要想用跳转的话得引入withRouter\n\nlet CheckLogin = withRouter(_class = class CheckLogin extends Component {\n  componentDidMount() {\n    const filterCheck = ['/login', 'register'];\n    const pathname = this.props.location.pathname; // 登录注册两个页面不需要判断\n\n    if (filterCheck.indexOf(pathname) > -1) {\n      return;\n    } // 在这里请求相关接口判断用户是否完成登录\n\n\n    axios.get('/user/info').then(res => {\n      console.log(res);\n\n      if (res.status === 200) {\n        if (res.data.code === 0) {\n          this.props.getUserInfo(res.data.data);\n        } else {\n          this.props.history.push('/login');\n        }\n      }\n    });\n  }\n\n  render() {\n    return null;\n  }\n\n}) || _class;\n\nexport default CheckLogin;","map":{"version":3,"sources":["/Users/loki/feature1/Handy-Booking-Management-System/src/component/checkLogin/checkLogin.js"],"names":["Component","axios","withRouter","CheckLogin","componentDidMount","filterCheck","pathname","props","location","indexOf","get","then","res","console","log","status","data","code","getUserInfo","history","push","render"],"mappings":";;AAAA,SAAQA,SAAR,QAAwB,OAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,QAAyB,kBAAzB,C,CAA6C;;IAGvCC,U,GADLD,U,UAAD,MACMC,UADN,SACyBH,SADzB,CACmC;AAC/BI,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,WAAW,GAAG,CAAC,QAAD,EAAW,UAAX,CAApB;AACA,UAAMC,QAAQ,GAAG,KAAKC,KAAL,CAAWC,QAAX,CAAoBF,QAArC,CAFgB,CAIhB;;AACA,QAAGD,WAAW,CAACI,OAAZ,CAAoBH,QAApB,IAAgC,CAAC,CAApC,EAAuC;AACnC;AACH,KAPe,CAQf;;;AACDL,IAAAA,KAAK,CAACS,GAAN,CAAU,YAAV,EACKC,IADL,CACUC,GAAG,IAAI;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,UAAGA,GAAG,CAACG,MAAJ,KAAe,GAAlB,EAAuB;AACnB,YAAGH,GAAG,CAACI,IAAJ,CAASC,IAAT,KAAkB,CAArB,EAAwB;AACpB,eAAKV,KAAL,CAAWW,WAAX,CAAuBN,GAAG,CAACI,IAAJ,CAASA,IAAhC;AACH,SAFD,MAEM;AACF,eAAKT,KAAL,CAAWY,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACH;AACJ;AACJ,KAVL;AAWH;;AACDC,EAAAA,MAAM,GAAG;AACL,WAAO,IAAP;AACH;;AAxB8B,C;;AA2BnC,eAAelB,UAAf","sourcesContent":["import {Component} from 'react';\nimport axios from 'axios';\nimport {withRouter} from 'react-router-dom'  // 由于checkLogin 不是路由，要想用跳转的话得引入withRouter\n\n@withRouter\nclass CheckLogin extends Component {\n    componentDidMount() {\n        const filterCheck = ['/login', 'register']\n        const pathname = this.props.location.pathname;\n\n        // 登录注册两个页面不需要判断\n        if(filterCheck.indexOf(pathname) > -1) {\n            return;\n        }\n         // 在这里请求相关接口判断用户是否完成登录\n        axios.get('/user/info')\n            .then(res => {\n                console.log(res);\n                if(res.status === 200) {\n                    if(res.data.code === 0) {\n                        this.props.getUserInfo(res.data.data)\n                    }else {\n                        this.props.history.push('/login')\n                    }\n                }\n            })\n    }\n    render() {\n        return null;\n    }\n}\n\nexport default CheckLogin;"]},"metadata":{},"sourceType":"module"}