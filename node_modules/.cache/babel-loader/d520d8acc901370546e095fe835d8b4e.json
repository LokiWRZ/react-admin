{"ast":null,"code":"import _classCallCheck from\"/Users/loki/feature1/HBMS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/loki/feature1/HBMS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/loki/feature1/HBMS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/loki/feature1/HBMS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _dec,_class;import React from'react';import axios from'axios';import{withRouter}from'react-router-dom';import{loadData}from'../../redux/user.redux';import{connect}from'react-redux';//is auth check\nvar AuthRoute=(_dec=connect(null,{loadData:loadData}),withRouter(_class=_dec(_class=/*#__PURE__*/function(_React$Component){_inherits(AuthRoute,_React$Component);var _super=_createSuper(AuthRoute);function AuthRoute(){_classCallCheck(this,AuthRoute);return _super.apply(this,arguments);}_createClass(AuthRoute,[{key:\"componentDidMount\",value:function componentDidMount(){var _this=this;var publicList=['/login','/register'];var pathname=this.props.location.pathname;if(publicList.indexOf(pathname)>-1){return null;}//get user info\naxios.get('/user/info').then(function(res){if(res.status===200){//filter user，code:1 is un log in，auto jump to login page\nif(res.data.code===0){// console.log(\"authroute--->user/info-->data\",res.data.data);\n_this.props.loadData(res.data.data);}else{_this.props.history.push('/login');}// console.log(res.data);\n}});//user state：is not auth \n}},{key:\"render\",value:function render(){return null;}}]);return AuthRoute;}(React.Component))||_class)||_class);export default AuthRoute;","map":{"version":3,"sources":["/Users/loki/feature1/HBMS/src/component/authroute/authroute.js"],"names":["React","axios","withRouter","loadData","connect","AuthRoute","publicList","pathname","props","location","indexOf","get","then","res","status","data","code","history","push","Component"],"mappings":"gkBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAASC,QAAT,KAAyB,wBAAzB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CAEA;GAMMC,CAAAA,S,OAJLD,OAAO,CACP,IADO,CAEP,CAACD,QAAQ,CAARA,QAAD,CAFO,C,CADPD,U,kTAMsB,gBACf,GAAMI,CAAAA,UAAU,CAAG,CAAC,QAAD,CAAU,WAAV,CAAnB,CACA,GAAMC,CAAAA,QAAQ,CAAG,KAAKC,KAAL,CAAWC,QAAX,CAAoBF,QAArC,CACA,GAAGD,UAAU,CAACI,OAAX,CAAmBH,QAAnB,EAA6B,CAAC,CAAjC,CAAmC,CAC/B,MAAO,KAAP,CACH,CACD;AACAN,KAAK,CAACU,GAAN,CAAU,YAAV,EAAwBC,IAAxB,CAA6B,SAAAC,GAAG,CAAE,CAC9B,GAAGA,GAAG,CAACC,MAAJ,GAAa,GAAhB,CAAoB,CAChB;AACA,GAAGD,GAAG,CAACE,IAAJ,CAASC,IAAT,GAAgB,CAAnB,CAAqB,CACjB;AACA,KAAI,CAACR,KAAL,CAAWL,QAAX,CAAoBU,GAAG,CAACE,IAAJ,CAASA,IAA7B,EACH,CAHD,IAGK,CACD,KAAI,CAACP,KAAL,CAAWS,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EACH,CACD;AACH,CACJ,CAXD,EAYA;AACH,C,uCACO,CACJ,MAAO,KAAP,CACH,C,uBAxBmBlB,KAAK,CAACmB,S,qBA0B9B,cAAed,CAAAA,SAAf","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport {withRouter} from 'react-router-dom'\nimport { loadData } from '../../redux/user.redux'\nimport {connect} from 'react-redux'\n\n//is auth check\n@withRouter\n@connect(\n\tnull,\n\t{loadData}\n)\nclass AuthRoute extends React.Component{\n    componentDidMount(){\n        const publicList = ['/login','/register']\n        const pathname = this.props.location.pathname\n        if(publicList.indexOf(pathname)>-1){\n            return null\n        }\n        //get user info\n        axios.get('/user/info').then(res=>{\n            if(res.status===200){\n                //filter user，code:1 is un log in，auto jump to login page\n                if(res.data.code===0){\n                    // console.log(\"authroute--->user/info-->data\",res.data.data);\n                    this.props.loadData(res.data.data)\n                }else{\n                    this.props.history.push('/login')\n                }\n                // console.log(res.data);\n            }\n        })\n        //user state：is not auth \n    }\n    render(){\n        return null\n    }\n}\nexport default AuthRoute"]},"metadata":{},"sourceType":"module"}