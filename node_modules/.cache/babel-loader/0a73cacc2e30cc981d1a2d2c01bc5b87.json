{"ast":null,"code":"var _jsxFileName = \"/Users/loki/feature1/Handy-Booking-Management-System/src/routes/Other/SpringText/index.js\";\nimport React from 'react';\nimport { notification } from 'antd';\n\nclass SpringText extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.createText = () => {\n      const _this = this; // WRITTEN BY TRUMAN HEBERLE\n\n\n      const COLOR = \"black\";\n      const MESSAGE = '很酷炫的文字效果';\n      const FONT_SIZE = 100;\n      const AMOUNT = 3000;\n      const CLEAR_AMOUNT = 2;\n      const SIZE = 2;\n      const INITIAL_DISPLACEMENT = 100;\n      const INITIAL_VELOCITY = 5;\n      const VELOCITY_RETENTION = 0.95;\n      const SETTLE_SPEED = 0.01;\n      const FLEE_SPEED = 0.1;\n      const FLEE_DISTANCE = 50;\n      const FLEE = true;\n      const SCATTER_VELOCITY = 30;\n      const SCATTER = true; // MAIN\n\n      const CLEAR_RADIUS = Math.round(CLEAR_AMOUNT + SIZE);\n      const MOVED_O = Array.apply(null, Array(AMOUNT)).map(function () {\n        return null;\n      });\n      const canvas = document.getElementById(\"spring-text\");\n      const ctx = canvas.getContext(\"2d\");\n      var offsetX = canvas.getBoundingClientRect().left;\n      var POINTS = [];\n      var MOVED = [];\n      var moved_length = 0;\n      var MOUSE = {\n        x: 0,\n        y: 0\n      };\n\n      function Point(x, y, r, g, b, a) {\n        var angle = Math.random() * 6.28;\n        this.dest_x = x;\n        this.dest_y = y;\n        this.original_r = r;\n        this.original_g = g;\n        this.original_a = a;\n        this.lastx = 0;\n        this.lasty = 0;\n        this.x = canvas.width / 2 - x + (Math.random() - 0.5) * INITIAL_DISPLACEMENT;\n        this.y = canvas.height / 2 - y + (Math.random() - 0.5) * INITIAL_DISPLACEMENT;\n        this.velx = INITIAL_VELOCITY * Math.cos(angle);\n        this.vely = INITIAL_VELOCITY * Math.sin(angle);\n        this.target_x = canvas.width / 2 - x;\n        this.target_y = canvas.height / 2 - y;\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n        this.moved = false;\n        MOVED[moved_length] = this;\n        moved_length++;\n\n        this.getX = function () {\n          return this.x;\n        };\n\n        this.getY = function () {\n          return this.y;\n        };\n\n        this.fleeFrom = function (x, y) {\n          this.velx -= (MOUSE.x - this.x) * FLEE_SPEED;\n          this.vely -= (MOUSE.y - this.y) * FLEE_SPEED;\n        };\n\n        this.settleTo = function (x, y) {\n          this.velx = VELOCITY_RETENTION * (this.velx + (this.target_x - this.x) * SETTLE_SPEED);\n          this.vely = VELOCITY_RETENTION * (this.vely + (this.target_y - this.y) * SETTLE_SPEED);\n        };\n\n        this.scatter = function () {\n          var unit = this.unitVecTo(MOUSE.x, MOUSE.y);\n          var vel = SCATTER_VELOCITY * (0.5 + Math.random() / 2);\n          this.velx = -unit.x * vel;\n          this.vely = -unit.y * vel;\n        };\n\n        this.checkMove = function () {\n          this.moved = !Math.abs(Math.round(this.target_x - this.x)) == 0 || !Math.abs(Math.round(this.target_y - this.y)) == 0 || !Math.abs(Math.round(this.velx)) == 0 || !Math.abs(Math.round(this.vely)) == 0;\n        };\n\n        this.simpleMove = function () {\n          this.checkMove();\n\n          if (!this.moved) {\n            return;\n          }\n\n          this.lastx = this.x;\n          this.lasty = this.y;\n          this.x += this.velx;\n          this.y += this.vely;\n          MOVED[moved_length] = this;\n          moved_length++;\n        };\n\n        this.move = function () {\n          if (this.distanceTo(MOUSE.x, MOUSE.y) <= FLEE_DISTANCE) {\n            this.fleeFrom(MOUSE.x, MOUSE.y);\n          } else {\n            this.settleTo(this.target_x, this.target_y);\n          }\n\n          this.simpleMove();\n        };\n\n        this.distanceTo = function (x, y) {\n          var dx = x - this.x;\n          var dy = y - this.y;\n          return Math.sqrt(dx * dx + dy * dy);\n        };\n\n        this.unitVecTo = function (x, y) {\n          var dx = x - this.x;\n          var dy = y - this.y;\n          var d = Math.sqrt(dx * dx + dy * dy);\n          return {\n            x: dx / d,\n            y: dy / d\n          };\n        };\n\n        this.inMotion = function () {\n          return this.moved;\n        };\n\n        this.clear = function () {\n          ctx.clearRect(this.lastx - CLEAR_RADIUS, this.lasty - CLEAR_RADIUS, CLEAR_RADIUS * 2, CLEAR_RADIUS * 2);\n        };\n\n        this.draw = function () {\n          ctx.fillStyle = \"rgba(\" + this.r + \",\" + this.g + \",\" + this.b + \",\" + this.a + \")\";\n          ctx.beginPath();\n          ctx.arc(this.x, this.y, SIZE, 0, 2 * Math.PI);\n          ctx.fill();\n        };\n      }\n\n      window.addEventListener(\"resize\", function () {\n        resizeCanvas();\n        adjustText();\n      });\n\n      if (FLEE) {\n        canvas.addEventListener(\"mousemove\", function (event) {\n          MOUSE.x = event.clientX - offsetX;\n          MOUSE.y = event.clientY - 66;\n        });\n      }\n\n      if (SCATTER) {\n        canvas.addEventListener(\"click\", function (event) {\n          MOUSE.x = event.clientX - offsetX;\n          MOUSE.y = event.clientY - 66;\n\n          for (var i = 0; i < POINTS.length; i++) {\n            POINTS[i].scatter();\n          }\n        });\n      }\n\n      function resizeCanvas() {\n        canvas.width = canvas.clientWidth;\n        canvas.height = canvas.clientHeight;\n      }\n\n      function adjustText() {\n        ctx.fillStyle = COLOR;\n        ctx.textBaseline = \"middle\";\n        ctx.textAlign = \"center\";\n        ctx.font = FONT_SIZE + \"px Arial\";\n        ctx.fillText(MESSAGE, canvas.width / 2, canvas.height / 2);\n        var textWidth = ctx.measureText(MESSAGE).width;\n\n        if (textWidth == 0) {\n          return;\n        }\n\n        var minX = canvas.width / 2 - textWidth / 2;\n        var minY = canvas.height / 2 - FONT_SIZE / 2;\n        var data = ctx.getImageData(minX, minY, textWidth, FONT_SIZE).data;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        var isBlank = true;\n\n        for (var i = 0; i < data.length; i++) {\n          if (data[i] != 0) {\n            isBlank = false;\n            break;\n          }\n        }\n\n        if (!isBlank) {\n          var count = 0;\n          var curr = 0;\n          var num = 0;\n          var x = 0;\n          var y = 0;\n          var w = Math.floor(textWidth);\n          POINTS = [];\n\n          while (count < AMOUNT) {\n            while (curr == 0) {\n              num = Math.floor(Math.random() * data.length);\n              curr = data[num];\n            }\n\n            num = Math.floor(num / 4);\n            x = w / 2 - num % w;\n            y = FONT_SIZE / 2 - Math.floor(num / w);\n            POINTS.push(new Point(x, y, data[num * 4], data[num * 4 + 1], data[num * 4 + 2], data[num * 4 + 3]));\n            curr = 0;\n            count++;\n          }\n        }\n      }\n\n      function init() {\n        resizeCanvas();\n        adjustText();\n        animate(); // window.requestAnimationFrame(animate);\n      }\n\n      function animate() {\n        update();\n        draw();\n      }\n\n      function update() {\n        for (var i = 0; i < POINTS.length; i++) {\n          POINTS[i].move();\n        }\n      }\n\n      function draw() {\n        for (var i = 0; i < moved_length; i++) {\n          MOVED[i].clear();\n        }\n\n        MOVED = MOVED_O;\n        moved_length = 0;\n\n        for (var i = 0; i < POINTS.length; i++) {\n          POINTS[i].draw();\n        }\n\n        _this.myReq = window.requestAnimationFrame(animate);\n      }\n\n      init();\n    };\n  }\n\n  componentDidMount() {\n    this.createText();\n    notification.open({\n      description: '鼠标移入到文字上，或者鼠标点击屏幕',\n      style: {\n        marginTop: 64\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    window.cancelAnimationFrame(this.myReq); //绑定到DOM、window上的事件需要自己手动销毁吗\n\n    notification.destroy();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.bg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      id: \"spring-text\",\n      style: styles.bg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst styles = {\n  bg: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: 'calc(100vh - 64px)'\n  }\n};\nexport default SpringText;","map":{"version":3,"sources":["/Users/loki/feature1/Handy-Booking-Management-System/src/routes/Other/SpringText/index.js"],"names":["React","notification","SpringText","Component","createText","_this","COLOR","MESSAGE","FONT_SIZE","AMOUNT","CLEAR_AMOUNT","SIZE","INITIAL_DISPLACEMENT","INITIAL_VELOCITY","VELOCITY_RETENTION","SETTLE_SPEED","FLEE_SPEED","FLEE_DISTANCE","FLEE","SCATTER_VELOCITY","SCATTER","CLEAR_RADIUS","Math","round","MOVED_O","Array","apply","map","canvas","document","getElementById","ctx","getContext","offsetX","getBoundingClientRect","left","POINTS","MOVED","moved_length","MOUSE","x","y","Point","r","g","b","a","angle","random","dest_x","dest_y","original_r","original_g","original_a","lastx","lasty","width","height","velx","cos","vely","sin","target_x","target_y","moved","getX","getY","fleeFrom","settleTo","scatter","unit","unitVecTo","vel","checkMove","abs","simpleMove","move","distanceTo","dx","dy","sqrt","d","inMotion","clear","clearRect","draw","fillStyle","beginPath","arc","PI","fill","window","addEventListener","resizeCanvas","adjustText","event","clientX","clientY","i","length","clientWidth","clientHeight","textBaseline","textAlign","font","fillText","textWidth","measureText","minX","minY","data","getImageData","isBlank","count","curr","num","w","floor","push","init","animate","update","myReq","requestAnimationFrame","componentDidMount","open","description","style","marginTop","componentWillUnmount","cancelAnimationFrame","destroy","render","styles","bg","position","top"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {notification} from 'antd'\n\nclass SpringText extends React.Component{\n  componentDidMount(){\n    this.createText()\n    notification.open({\n      description: '鼠标移入到文字上，或者鼠标点击屏幕',\n      style:{marginTop:64}\n    });\n\n  }\n  componentWillUnmount(){\n    window.cancelAnimationFrame(this.myReq)\n    //绑定到DOM、window上的事件需要自己手动销毁吗\n    notification.destroy()\n  }\n  createText =()=> {\n    const _this = this\n    // WRITTEN BY TRUMAN HEBERLE\n    const COLOR = \"black\"\n    const MESSAGE = '很酷炫的文字效果'\n\n    const FONT_SIZE = 100;\n    const AMOUNT = 3000;\n    const CLEAR_AMOUNT = 2;\n    const SIZE = 2;\n    const INITIAL_DISPLACEMENT = 100;\n    const INITIAL_VELOCITY = 5;\n    const VELOCITY_RETENTION = 0.95;\n    const SETTLE_SPEED = 0.01;\n    const FLEE_SPEED = 0.1;\n    const FLEE_DISTANCE = 50;\n    const FLEE = true;\n    const SCATTER_VELOCITY = 30;\n    const SCATTER = true;\n    \n// MAIN\n    const CLEAR_RADIUS = Math.round(CLEAR_AMOUNT + SIZE);\n    const MOVED_O = Array.apply(null, Array(AMOUNT)).map(function () {return null;});\n\n    const canvas = document.getElementById(\"spring-text\");\n    const ctx = canvas.getContext(\"2d\");\n    var offsetX = canvas.getBoundingClientRect().left\n    var POINTS = [];\n    var MOVED = [];\n    var moved_length = 0;\n    var MOUSE = {\n      x: 0,\n      y: 0\n    }\n\n    function Point(x,y,r,g,b,a) {\n      var angle = Math.random() * 6.28;\n      this.dest_x = x;\n      this.dest_y = y;\n      this.original_r = r;\n      this.original_g = g;\n      this.original_a = a;\n      this.lastx = 0;\n      this.lasty = 0;\n      this.x = canvas.width/2 - x + (Math.random() - 0.5) * INITIAL_DISPLACEMENT;\n      this.y = canvas.height/2 - y + (Math.random() - 0.5) * INITIAL_DISPLACEMENT;\n      this.velx = INITIAL_VELOCITY * Math.cos(angle);\n      this.vely = INITIAL_VELOCITY * Math.sin(angle);\n      this.target_x = canvas.width/2 - x;\n      this.target_y = canvas.height/2 - y;\n      this.r = r;\n      this.g = g;\n      this.b = b;\n      this.a = a;\n      this.moved = false;\n      MOVED[moved_length] = this;\n      moved_length++;\n\n      this.getX = function() {\n        return this.x;\n      }\n\n      this.getY = function() {\n        return this.y;\n      }\n\n      this.fleeFrom = function(x, y) {\n        this.velx -= ((MOUSE.x - this.x) * FLEE_SPEED);\n        this.vely -= ((MOUSE.y - this.y) * FLEE_SPEED);\n      }\n\n      this.settleTo = function(x, y) {\n        this.velx = VELOCITY_RETENTION * (this.velx + (this.target_x - this.x) * SETTLE_SPEED);\n        this.vely = VELOCITY_RETENTION * (this.vely + (this.target_y - this.y) * SETTLE_SPEED);\n      }\n\n      this.scatter = function() {\n        var unit = this.unitVecTo(MOUSE.x, MOUSE.y);\n        var vel = SCATTER_VELOCITY * (0.5 + Math.random() / 2);\n        this.velx = -unit.x * vel;\n        this.vely = -unit.y * vel;\n      }\n\n      this.checkMove = function() {\n        this.moved = (!Math.abs(Math.round(this.target_x - this.x)) == 0 || !Math.abs(Math.round(this.target_y - this.y)) == 0 || !Math.abs(Math.round(this.velx)) == 0 || !Math.abs(Math.round(this.vely)) == 0);\n      }\n\n      this.simpleMove = function() {\n        this.checkMove();\n        if (!this.moved) {\n          return;\n        }\n\n        this.lastx = this.x;\n        this.lasty = this.y;\n        this.x += this.velx;\n        this.y += this.vely;\n        MOVED[moved_length] = this;\n        moved_length++;\n      }\n\n      this.move = function() {\n        if (this.distanceTo(MOUSE.x, MOUSE.y) <= FLEE_DISTANCE) {\n          this.fleeFrom(MOUSE.x, MOUSE.y);\n        }\n        else {\n          this.settleTo(this.target_x, this.target_y);\n        }\n        this.simpleMove();\n      }\n\n      this.distanceTo = function(x, y) {\n        var dx = x - this.x;\n        var dy = y - this.y;\n        return Math.sqrt(dx*dx+ dy*dy);\n      }\n\n      this.unitVecTo = function(x, y) {\n        var dx = x - this.x;\n        var dy = y - this.y;\n        var d = Math.sqrt(dx*dx + dy*dy);\n        return {\n          x: dx / d,\n          y: dy / d\n        };\n      }\n\n      this.inMotion = function() {\n        return this.moved;\n      }\n\n      this.clear = function() {\n        ctx.clearRect(this.lastx-CLEAR_RADIUS,this.lasty-CLEAR_RADIUS,CLEAR_RADIUS*2,CLEAR_RADIUS*2);\n      }\n\n      this.draw = function() {\n        ctx.fillStyle = \"rgba(\"+this.r+\",\"+this.g+\",\"+this.b+\",\"+this.a+\")\";\n        ctx.beginPath();\n        ctx.arc(this.x,this.y,SIZE,0,2*Math.PI);\n        ctx.fill();\n      }\n    }\n\n    window.addEventListener(\"resize\", function() {\n      resizeCanvas()\n      adjustText()\n    });\n\n    if (FLEE) {\n      canvas.addEventListener(\"mousemove\", function(event) {\n        MOUSE.x = event.clientX -offsetX;\n        MOUSE.y = event.clientY -66;\n      });\n    }\n\n    if (SCATTER) {\n        canvas.addEventListener(\"click\", function(event) {\n        MOUSE.x = event.clientX-offsetX;\n        MOUSE.y = event.clientY -66 ;\n        for (var i=0; i<POINTS.length; i++) {\n          POINTS[i].scatter();\n        }\n      });\n    }\n\n    function resizeCanvas() {\n      canvas.width  = canvas.clientWidth;\n      canvas.height = canvas.clientHeight;\n    }\n\n    function adjustText() {\n      ctx.fillStyle = COLOR;\n      ctx.textBaseline = \"middle\";\n      ctx.textAlign = \"center\";\n      ctx.font = FONT_SIZE + \"px Arial\";\n      ctx.fillText(MESSAGE, canvas.width/2, canvas.height/2);\n      var textWidth = ctx.measureText(MESSAGE).width;\n      if (textWidth == 0) {\n        return;\n      }\n      var minX = canvas.width/2 - textWidth/2;\n      var minY = canvas.height/2 - FONT_SIZE/2;\n      var data = ctx.getImageData(minX, minY, textWidth, FONT_SIZE).data;\n      ctx.clearRect(0,0,canvas.width,canvas.height);\n      var isBlank = true;\n      for (var i=0; i<data.length; i++) {\n        if (data[i] != 0) {\n          isBlank = false;\n          break;\n        }\n      }\n\n      if (!isBlank) {\n        var count = 0;\n        var curr = 0;\n        var num = 0;\n        var x = 0;\n        var y = 0;\n        var w = Math.floor(textWidth);\n        POINTS = [];\n        while (count < AMOUNT) {\n          while (curr == 0) {\n            num = Math.floor(Math.random() * data.length);\n            curr = data[num];\n          }\n          num = Math.floor(num / 4);\n          x = w/2 - num%w;\n          y = FONT_SIZE/2 - Math.floor(num/w);\n          POINTS.push(new Point(x,y,data[num*4],data[num*4 + 1],data[num*4 + 2],data[num*4 + 3]));\n          curr = 0;\n          count++;\n        }\n      }\n    }\n\n    function init() {\n      resizeCanvas()\n      adjustText()\n      animate()\n      // window.requestAnimationFrame(animate);\n    }\n\n    function animate() {\n      update();\n      draw();\n    }\n\n    function update() {\n      for (var i=0; i<POINTS.length; i++) {\n        POINTS[i].move()\n      }\n    }\n\n    function draw() {\n      for (var i=0; i<moved_length; i++) {\n        MOVED[i].clear();\n      }\n      MOVED = MOVED_O;\n      moved_length = 0;\n\n      for (var i=0; i<POINTS.length; i++) {\n        POINTS[i].draw()\n      }\n\n      _this.myReq = window.requestAnimationFrame(animate);\n    }\n\n    init();\n  }\n  render(){\n    return (\n      <div style={styles.bg}>\n        <canvas id=\"spring-text\" style={styles.bg}/>\n      </div>\n    )\n  }\n}\nconst styles = {\n  bg: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: 'calc(100vh - 64px)',\n  },\n}\nexport default SpringText"]},"metadata":{},"sourceType":"module"}