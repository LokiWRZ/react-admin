{"ast":null,"code":"var _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/loki/feature1/Handy-Booking-Management-System/src/component/HeaderBar/index.js\";\n\nimport React from 'react';\nimport { Icon, Badge, Dropdown, Menu, Modal } from 'antd';\nimport screenfull from 'screenfull';\nimport { inject, observer } from 'mobx-react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { isAuthenticated } from '../../utils/Session'; //withRouter一定要写在前面，不然路由变化不会反映到props中去\n\nlet HeaderBar = (_dec = inject('appStore'), withRouter(_class = _dec(_class = observer(_class = (_temp = class HeaderBar extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      icon: 'arrows-alt',\n      count: 100,\n      visible: false,\n      avatar: require('./img/04.jpg')\n    };\n\n    this.toggle = () => {\n      this.props.onToggle();\n    };\n\n    this.screenfullToggle = () => {\n      if (screenfull.enabled) {\n        screenfull.toggle();\n      }\n    };\n\n    this.logout = () => {\n      this.props.appStore.toggleLogin(false);\n      this.props.history.push(this.props.location.pathname);\n    };\n  }\n\n  componentDidMount() {\n    screenfull.onchange(() => {\n      this.setState({\n        icon: screenfull.isFullscreen ? 'shrink' : 'arrows-alt'\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    screenfull.off('change');\n  }\n\n  render() {\n    const {\n      icon,\n      count,\n      visible,\n      avatar\n    } = this.state;\n    const {\n      appStore,\n      collapsed,\n      location\n    } = this.props;\n    const notLogin = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: '/login',\n        state: {\n          from: location\n        }\n      },\n      style: {\n        color: 'rgba(0, 0, 0, 0.65)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    }, \"\\u767B\\u5F55\"), \"\\xA0\", /*#__PURE__*/React.createElement(\"img\", {\n      src: require('../../assets/img/defaultUser.jpg'),\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }));\n    const menu = /*#__PURE__*/React.createElement(Menu, {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Menu.ItemGroup, {\n      title: \"\\u7528\\u6237\\u4E2D\\u5FC3\",\n      className: \"menu-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Menu.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }, \"\\u4F60\\u597D - \", isAuthenticated()), /*#__PURE__*/React.createElement(Menu.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }, \"\\u4E2A\\u4EBA\\u4FE1\\u606F\"), /*#__PURE__*/React.createElement(Menu.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      onClick: this.logout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 22\n      }\n    }, \"\\u9000\\u51FA\\u767B\\u5F55\"))), /*#__PURE__*/React.createElement(Menu.ItemGroup, {\n      title: \"\\u8BBE\\u7F6E\\u4E2D\\u5FC3\",\n      className: \"menu-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Menu.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }, \"\\u4E2A\\u4EBA\\u8BBE\\u7F6E\"), /*#__PURE__*/React.createElement(Menu.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }\n    }, \"\\u7CFB\\u7EDF\\u8BBE\\u7F6E\")));\n    const login = /*#__PURE__*/React.createElement(Dropdown, {\n      overlay: menu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: () => this.setState({\n        visible: true\n      }),\n      src: avatar,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"headerbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: collapsed ? 'menu-unfold' : 'menu-fold',\n      className: \"trigger\",\n      onClick: this.toggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        lineHeight: '64px',\n        float: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"header-ul\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: icon,\n      onClick: this.screenfullToggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"li\", {\n      onClick: () => this.setState({\n        count: 0\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Badge, {\n      count: appStore.isLogin ? count : 0,\n      overflowCount: 99,\n      style: {\n        marginRight: -17\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"notification\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, appStore.isLogin ? login : notLogin))), /*#__PURE__*/React.createElement(Modal, {\n      footer: null,\n      closable: false,\n      visible: visible,\n      wrapClassName: \"vertical-center-modal\",\n      onCancel: () => this.setState({\n        visible: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: avatar,\n      alt: \"\",\n      width: \"100%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}, _temp)) || _class) || _class) || _class);\nexport default HeaderBar;","map":{"version":3,"sources":["/Users/loki/feature1/Handy-Booking-Management-System/src/component/HeaderBar/index.js"],"names":["React","Icon","Badge","Dropdown","Menu","Modal","screenfull","inject","observer","Link","withRouter","isAuthenticated","HeaderBar","Component","state","icon","count","visible","avatar","require","toggle","props","onToggle","screenfullToggle","enabled","logout","appStore","toggleLogin","history","push","location","pathname","componentDidMount","onchange","setState","isFullscreen","componentWillUnmount","off","render","collapsed","notLogin","from","color","menu","login","lineHeight","float","isLogin","marginRight"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,QAAtB,EAAgCC,IAAhC,EAAsCC,KAAtC,QAAmD,MAAnD;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,YAAjC;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,SAASC,eAAT,QAAgC,qBAAhC,C,CAEA;;IAEMC,S,WADOL,MAAM,CAAC,UAAD,C,EAAlBG,U,wBAAgCF,Q,mBAAjC,MACMI,SADN,SACwBZ,KAAK,CAACa,SAD9B,CACwC;AAAA;AAAA;AAAA,SACtCC,KADsC,GAC9B;AACNC,MAAAA,IAAI,EAAE,YADA;AAENC,MAAAA,KAAK,EAAE,GAFD;AAGNC,MAAAA,OAAO,EAAE,KAHH;AAINC,MAAAA,MAAM,EAAEC,OAAO,CAAC,cAAD;AAJT,KAD8B;;AAAA,SAoBtCC,MApBsC,GAoB7B,MAAM;AACb,WAAKC,KAAL,CAAWC,QAAX;AACD,KAtBqC;;AAAA,SAuBtCC,gBAvBsC,GAuBnB,MAAM;AACvB,UAAIjB,UAAU,CAACkB,OAAf,EAAwB;AACtBlB,QAAAA,UAAU,CAACc,MAAX;AACD;AACF,KA3BqC;;AAAA,SA4BtCK,MA5BsC,GA4B7B,MAAM;AACb,WAAKJ,KAAL,CAAWK,QAAX,CAAoBC,WAApB,CAAgC,KAAhC;AACA,WAAKN,KAAL,CAAWO,OAAX,CAAmBC,IAAnB,CAAwB,KAAKR,KAAL,CAAWS,QAAX,CAAoBC,QAA5C;AACD,KA/BqC;AAAA;;AAQtCC,EAAAA,iBAAiB,GAAI;AACnB1B,IAAAA,UAAU,CAAC2B,QAAX,CAAoB,MAAM;AACxB,WAAKC,QAAL,CAAc;AACZnB,QAAAA,IAAI,EAAET,UAAU,CAAC6B,YAAX,GAA0B,QAA1B,GAAqC;AAD/B,OAAd;AAGD,KAJD;AAKD;;AAEDC,EAAAA,oBAAoB,GAAI;AACtB9B,IAAAA,UAAU,CAAC+B,GAAX,CAAe,QAAf;AACD;;AAeDC,EAAAA,MAAM,GAAI;AACR,UAAM;AAACvB,MAAAA,IAAD;AAAOC,MAAAA,KAAP;AAAcC,MAAAA,OAAd;AAAuBC,MAAAA;AAAvB,QAAiC,KAAKJ,KAA5C;AACA,UAAM;AAACY,MAAAA,QAAD;AAAWa,MAAAA,SAAX;AAAsBT,MAAAA;AAAtB,QAAkC,KAAKT,KAA7C;AACA,UAAMmB,QAAQ,gBACZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAE;AAACT,QAAAA,QAAQ,EAAE,QAAX;AAAqBjB,QAAAA,KAAK,EAAE;AAAC2B,UAAAA,IAAI,EAAEX;AAAP;AAA5B,OAAV;AAAyD,MAAA,KAAK,EAAE;AAACY,QAAAA,KAAK,EAAE;AAAR,OAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,uBAEE;AAAK,MAAA,GAAG,EAAEvB,OAAO,CAAC,kCAAD,CAAjB;AAAuD,MAAA,GAAG,EAAC,EAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF;AAMA,UAAMwB,IAAI,gBACR,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD,CAAM,SAAN;AAAgB,MAAA,KAAK,EAAC,0BAAtB;AAA6B,MAAA,SAAS,EAAC,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAiBhC,eAAe,EAAhC,CADF,eAEE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAFF,eAGE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAW;AAAM,MAAA,OAAO,EAAE,KAAKc,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAX,CAHF,CADF,eAME,oBAAC,IAAD,CAAM,SAAN;AAAgB,MAAA,KAAK,EAAC,0BAAtB;AAA6B,MAAA,SAAS,EAAC,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,eAEE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAFF,CANF,CADF;AAaA,UAAMmB,KAAK,gBACT,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAED,IAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,OAAO,EAAE,MAAM,KAAKT,QAAL,CAAc;AAACjB,QAAAA,OAAO,EAAE;AAAV,OAAd,CAApB;AAAoD,MAAA,GAAG,EAAEC,MAAzD;AAAiE,MAAA,GAAG,EAAC,EAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAKA,wBACE;AAAK,MAAA,EAAE,EAAC,WAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AACE,MAAA,IAAI,EAAEqB,SAAS,GAAG,aAAH,GAAmB,WADpC;AAEE,MAAA,SAAS,EAAC,SAFZ;AAGE,MAAA,OAAO,EAAE,KAAKnB,MAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAKE;AAAK,MAAA,KAAK,EAAE;AAACyB,QAAAA,UAAU,EAAE,MAAb;AAAqBC,QAAAA,KAAK,EAAE;AAA5B,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAI,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAE/B,IAAZ;AAAkB,MAAA,OAAO,EAAE,KAAKQ,gBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAJ,CADF,eAEE;AAAI,MAAA,OAAO,EAAE,MAAM,KAAKW,QAAL,CAAc;AAAClB,QAAAA,KAAK,EAAE;AAAR,OAAd,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAEU,QAAQ,CAACqB,OAAT,GAAmB/B,KAAnB,GAA2B,CAAzC;AAA4C,MAAA,aAAa,EAAE,EAA3D;AAA+D,MAAA,KAAK,EAAE;AAACgC,QAAAA,WAAW,EAAE,CAAC;AAAf,OAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CAFF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGtB,QAAQ,CAACqB,OAAT,GAAmBH,KAAnB,GAA2BJ,QAD9B,CAPF,CADF,CALF,eAkBE,oBAAC,KAAD;AACE,MAAA,MAAM,EAAE,IADV;AACgB,MAAA,QAAQ,EAAE,KAD1B;AAEE,MAAA,OAAO,EAAEvB,OAFX;AAGE,MAAA,aAAa,EAAC,uBAHhB;AAIE,MAAA,QAAQ,EAAE,MAAM,KAAKiB,QAAL,CAAc;AAACjB,QAAAA,OAAO,EAAE;AAAV,OAAd,CAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AAAK,MAAA,GAAG,EAAEC,MAAV;AAAkB,MAAA,GAAG,EAAC,EAAtB;AAAyB,MAAA,KAAK,EAAC,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CAlBF,CADF;AA4BD;;AAxFqC,C;AA2FxC,eAAeN,SAAf","sourcesContent":["import React from 'react'\nimport { Icon, Badge, Dropdown, Menu, Modal } from 'antd'\nimport screenfull from 'screenfull'\nimport { inject, observer } from 'mobx-react'\nimport { Link, withRouter } from 'react-router-dom'\nimport { isAuthenticated } from '../../utils/Session'\n\n//withRouter一定要写在前面，不然路由变化不会反映到props中去\n@withRouter @inject('appStore') @observer\nclass HeaderBar extends React.Component {\n  state = {\n    icon: 'arrows-alt',\n    count: 100,\n    visible: false,\n    avatar: require('./img/04.jpg')\n  }\n\n  componentDidMount () {\n    screenfull.onchange(() => {\n      this.setState({\n        icon: screenfull.isFullscreen ? 'shrink' : 'arrows-alt'\n      })\n    })\n  }\n\n  componentWillUnmount () {\n    screenfull.off('change')\n  }\n\n  toggle = () => {\n    this.props.onToggle()\n  }\n  screenfullToggle = () => {\n    if (screenfull.enabled) {\n      screenfull.toggle()\n    }\n  }\n  logout = () => {\n    this.props.appStore.toggleLogin(false)\n    this.props.history.push(this.props.location.pathname)\n  }\n\n  render () {\n    const {icon, count, visible, avatar} = this.state\n    const {appStore, collapsed, location} = this.props\n    const notLogin = (\n      <div>\n        <Link to={{pathname: '/login', state: {from: location}}} style={{color: 'rgba(0, 0, 0, 0.65)'}}>登录</Link>&nbsp;\n        <img src={require('../../assets/img/defaultUser.jpg')} alt=\"\"/>\n      </div>\n    )\n    const menu = (\n      <Menu className='menu'>\n        <Menu.ItemGroup title='用户中心' className='menu-group'>\n          <Menu.Item>你好 - {isAuthenticated()}</Menu.Item>\n          <Menu.Item>个人信息</Menu.Item>\n          <Menu.Item><span onClick={this.logout}>退出登录</span></Menu.Item>\n        </Menu.ItemGroup>\n        <Menu.ItemGroup title='设置中心' className='menu-group'>\n          <Menu.Item>个人设置</Menu.Item>\n          <Menu.Item>系统设置</Menu.Item>\n        </Menu.ItemGroup>\n      </Menu>\n    )\n    const login = (\n      <Dropdown overlay={menu}>\n        <img onClick={() => this.setState({visible: true})} src={avatar} alt=\"\"/>\n      </Dropdown>\n    )\n    return (\n      <div id='headerbar'>\n        <Icon\n          type={collapsed ? 'menu-unfold' : 'menu-fold'}\n          className='trigger'\n          onClick={this.toggle}/>\n        <div style={{lineHeight: '64px', float: 'right'}}>\n          <ul className='header-ul'>\n            <li><Icon type={icon} onClick={this.screenfullToggle}/></li>\n            <li onClick={() => this.setState({count: 0})}>\n              <Badge count={appStore.isLogin ? count : 0} overflowCount={99} style={{marginRight: -17}}>\n                <Icon type=\"notification\"/>\n              </Badge>\n            </li>\n            <li>\n              {appStore.isLogin ? login : notLogin}\n            </li>\n          </ul>\n        </div>\n        <Modal\n          footer={null} closable={false}\n          visible={visible}\n          wrapClassName=\"vertical-center-modal\"\n          onCancel={() => this.setState({visible: false})}>\n          <img src={avatar} alt=\"\" width='100%'/>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nexport default HeaderBar"]},"metadata":{},"sourceType":"module"}